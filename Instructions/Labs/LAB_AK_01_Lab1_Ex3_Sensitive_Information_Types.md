---
lab:
  title: 演習 3 - 機密情報の種類を管理する
  module: Module 1 - Implement Information Protection
ms.openlocfilehash: 7dee6111f2414a45535fafc3fd50e808d05982a2
ms.sourcegitcommit: 53488624251b6cf8f79f2d1ff561e3f334764821
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/26/2022
ms.locfileid: "147694970"
---
# <a name="lab-1---exercise-3---manage-sensitive-information-types"></a>ラボ 1 - 演習 3 - 機密情報の種類を管理する

Contoso Ltd. は以前、チケット ソリューションでサポート チケットに取り組んでいる際に、従業員が誤って顧客の個人情報を送信するという問題がありました。 将来的にユーザーを教育するために、電子メールやドキュメントで従業員 ID を識別するためのカスタム機密情報の種類が必要です。これは 3 つの大文字と 6 つの数字で構成されます。 誤検知率を下げるために、キーワード "Employee" と "ID" が使用されます。 このタスクでは、新しいカスタム機密情報の種類、EDM ベースの分類用のデータベース、およびキーワード辞書を作成します。 

### <a name="task-1--create-custom-sensitive-information-types"></a>タスク 1 - カスタム機密情報の種類を作成する

この演習では、セキュリティ/コンプライアンス センター PowerShell モジュールを用い、キーワード "Employee" と "ID" に近い従業員 ID のパターンを認識するカスタム機密情報を新しく作成します。

1. Client 1 VM (LON-CL1) に **lon-cl1\admin** アカウントでログインしておきます。

1. **Microsoft Edge** で、 **https://compliance.microsoft.com** に移動し、Microsoft Purview ポータルに JoniS@WWLxZZZZZZ.onmicrosoft.com としてログインします (ZZZZZZ はラボ ホスティング プロバイダーから支給された固有のテナント ID)。 Joni のパスワードは、ラボ ホスティング プロバイダーから支給されます。

1. 左側のナビゲーション ウィンドウから **[データ分類]** を選択します。

1. "**データ分類とは?**" というメッセージが表示されたら、**[閉じる]** を選択し、上部のウィンドウから **[機密情報の種類]** を選択します。  ヒント: **[機密情報の種類]** が Purview ポータルに表示されない場合は、以前のラボのコンプライアンス管理者に対する Joni の権限の更新がブラウザーでまだ更新されていない可能性があります。  JoniS としてサインアウトし、再度サインインする必要がある場合があります。

1. **[機密情報の種類]** タブで、 **[+ 機密情報の種類を作成]** を選択し、新しい機密情報の種類を作成するウィザードを開きます。

1. **[機密情報の種類の名前を設定]** ページで、次の情報を入力します。

    - **[名前]** : Contoso 従業員 ID
    - **[説明]** : Contoso の従業員 ID のパターン。

1. **[次へ]** を選択します。

1. **[この機密情報の種類のパターンを定義する]** ページで、**[パターンを作成する]** を選択します。

1. 右側の **[新しいパターン]** ウィンドウで、 **[+ 主要要素を追加]** を選択し、 **[正規表現]** を選択します。

1. 新しい右側の **[正規表現の追加]** ウィンドウで、次のように入力します。

    - **[ID]** : Contoso ID
    - **正規表現**: ```\s[A-Z]{3}[0-9]{6}\s``` 
    - *"文字列の一致"*

1. **[Done]** を選択します。

1. 右側の **[新しいパターン]** ウィンドウに戻り、 **[補助要素]** で **[+ 補助要素または要素のグループを追加]** ドロップダウン メニューを選択し、 **[キーワード一覧]** を選択します。

1. 新しい右側の **[キーワード一覧の追加]** ウィンドウで、次のように入力します。

    - **ID**: 従業員 ID のキーワード
    - **大文字と小文字の区別をしない**: 
        - *Employee*
        - *ID* 
    - "**大文字と小文字の区別をしない**" フィールドで、 *[単語の一致]* の放射状を選択します

1. **[Done]** を選択します。

1. 新しいパターン ウィンドウで、**文字近接** 値を *100* 文字に減らします。

1. **[作成]** ボタンを選択します。

1. **[この機密情報の種類のパターンを定義する]** ページに戻り、 **[次へ]** を選択します。

1. **[コンプライアンス ポリシーに表示する推奨信頼レベルの選択]** ページで、既定値を使用して **[次へ]** を選択します。

1. **[設定の確認と終了]** ページで設定を確認し、**[作成]** を選択します。 正常に作成されたら、**[完了]** を選択します。

1. ブラウザー画面は開いたままにします。

100 文字の範囲内で、3 つの大文字、6 つの数字、キーワード "Employee"、"IDs" のパターンで、従業員 ID を特定する、新しい機密情報の種類を作成しました。

### <a name="task-2--create-edm-based-classification-information-type"></a>タスク 2 – EDMベースの分類情報の種類を作成する。

追加の検索パターンとして、従業員データのデータベース スキーマで EDMベースの分類を作成します。 データベース ソース ファイルは以下の従業員のデータ フィールドでフォーマットされます:Name、Birthdate、StreetAddress、EmployeeID。

1. Client 1 VM (LON-CL1) には **lon-cl1\admin** アカウントでログインし、Microsoft 365 には **Joni Sherman** としてログインしておく必要があります。 

1. 必要な Azure AD セキュリティ グループを作成するには、右上角のユーザー画像を選択して Joni Sherman のアカウントからサインアウトし、**[サインアウト]** を選択します。

1. ブラウザー画面を閉じ、新しいブラウザー画面を開きます。

1. **Microsoft Edge** で、 **https://admin.microsoft.com** に移動します。

1. **[アカウントを選択する]** ページが表示されたら、**[別のアカウントを使用する]** を選択し、**MOD 管理者** admin@WWLxZZZZZZ.onmicrosoft.com としてサインインします (ZZZZZZ はラボ ホスティング プロバイダーから支給された固有のテナント ID)。  管理者のパスワードは、ラボ ホスティング プロバイダーから支給されます。

1. 左ペインから、**[チームとグループ]** を選択し、**[アクティブなチームとグループ]** を選択します。

1. 上部のウィンドウから **[グループの追加]** を選択します。

1. **[グループの種類の選択]** ページで、**[セキュリティ]**、**[次へ]** を選択します。

1. **[基本設定]** で、"**名前**" フィールドに「*EDM_DataUploaders*」と入力します。  "説明" フィールドに「*EDM のデータをアップロードする人*」と入力します。

1. **[次へ]** を選択します。

1. **[確認とグループの追加の完了]** ページで、設定を確認し、**[グループの作成]** を選択します。

1. **[新しいグループが作成されました]** ページが表示されたら、**[閉じる]** を選択します。

1. 上部のウィンドウから **[更新]** を選択し、**[セキュリティ]** タブを選択し、新しく作成された **[EDM_DataUploaders]** グループをリストから選択して、右側のウィンドウを開きます。

1. **[メンバー]** タブを選択し、**[すべてのメンバーの表示と管理]** を選択します。

1. **[グループ メンバーの管理]** 画面で、**[メンバーの追加]** を選択します。

1. **[Joni Sherman]** を選択し、**[追加 (1)]** ボタンを選択してから、戻る矢印ボタンを選択します。

1. **Joni Sherman** が **[メンバー]** の下に一覧表示されていることを確認します。

1. 右側のウィンドウを **[X]** で閉じます。

1. MOD 管理者のイニシャル **[MA]** の丸を選択し、**[サインアウト]** を選択します。

1. ブラウザー画面を閉じ、新しいブラウザー画面を開きます。

1. Microsoft Purview ポータル (https://compliance.microsoft.com ) に移動します。

1. **[アカウントを選択する]** ページが表示されたら、**[Joni Sherman]** を選択してサインインします。

1. **[データの分類]** を選択して、上部ペインから **[Exact data matches]\(完全データ一致\)** タブを選択します。

1. **[+ EDM スキーマを作成]** を選択して右側のペインを開き、新しいスキーマの定義を作成します。

1. "**名前**" フィールドに、「*employeedb*」と入力します。

1. "**説明**" フィールドに、「*従業員データベース スキーマ*」と入力します。

1. **[すべてのスキーマ フィールドで区切り記号と句読点を無視する]** をオンにします。

1. **[すべてのスキーマ フィールドで区切り記号と句読点を無視する]** のドロップダウンをクリックし、 *[ハイフン]* 、 *[ピリオド]* 、 *[スペース]* 、 *[開きかっこ]* 、 *[閉じかっこ]* を選択します。

1. 最初の **[スキーマ フィールド名]** に「*Name*」と入力し、**[フィールドは検索可能]** ボックスにマークを付けます。

1. 下端から **[+ スキーマ データ フィールドを追加]** を選択します。

1. **[スキーマ フィールド No. 2]** で、**[スキーマ フィールド名]** に「*Birthdate*」と入力します。

1. もう一度、下端から **[+ スキーマ データ フィールドを追加]** を選択します。

1. **[スキーマ フィールド No. 3]** で、**[スキーマ フィールド名]** に「*StreetAddress*」と入力します。

1. 最後にもう一度、下端から **[+ スキーマ データ フィールドを追加]** を選択します。

1. **[スキーマ フィールド No. 4]** で、**[スキーマ フィールド名]** に「*EmployeeID*」と入力します。

1. **[フィールドは検索可能]** を選択します。 

1. **[保存]** を選択します。

1. 左のウィンドウから **[EDM 機密情報の種類]** を選択します。

1. **[+ EDM 機密情報の種類を作成する]** を選択すると、**EDM ルール パッケージ** ウィザードが開きます。  

1. **[データ ストア スキーマを定義する]** ページで、**[既存の EDM スキーマを選択する]** を選択します。

1. **[employeedb]** を選択し、**[追加]** を選択します。

1. データ ストア スキーマを確認してから、**[次へ]** を選択します。

1. **[この EDM 機密情報の種類のパターンを定義する]** ページで、**[パターンを作成する]** を選択します。

1. 右側の **[新しいパターン]** ペインの [Primary element]\(プライマリ要素\) フィールドで、*[EmployeeID]* を選択します。

1. **[主要要素の機密情報の種類]** で、 **[+ 機密情報の種類を選択する]** を選択します。 

1. **検索** バーで、「*Contoso*」と入力し、Enter キーを押します。

1. **[Contoso 従業員 ID]** を選択し、**[完了]** を選択します。

1. **[完了]** を選択します。

1. *[Define patterns for this EDM sensitive info type]\(この EDM 機密情報の種類のパターンを定義する\)* 画面で、**[次へ]** を選択します。

1. **[推奨される信頼水準と文字の近接性を選択する]** で、既定値を維持し、**[次へ]** を選択します。

1. **[名前と EDM 機密情報の種類の説明]** ページで、名前として「*Contoso Employee EDM*」と入力します。

1. **[管理者向けの説明]** フィールドで、*[従業員の個人情報向けの、EDM ベースの機密情報の種類]* と入力します。

1. **[次へ]** を選択して、設定を確認し、**[送信]** を選択します。

1. **[EDM 機密情報の種類が作成されました]** ページで、**[完了]** を選択します。

1. Microsoft Purview ポータルのブラウザーは開いたままにします。

データベース ファイル ソースから従業員データを特定するための、EDM ベースの分類による機密情報の種類を作成しました。

### <a name="task-3--create-edm-based-classification-data-source"></a>タスク 3 – EDM ベースの分類情報の種類を作成する。

EDM ベースの分類を機密データを含むデータベースと関連付けるには、機密データの種類の実際のデータを EDM アップロード エージェント ツールを通してハッシュ化し、アップロードすることが次に必要となります。

1. Client 1 VM (LON-CL1) には **lon-cl1\admin** アカウントでログインし、Microsoft 365 には **Joni Sherman** としてログインしておく必要があります。 

1. **Microsoft Edge** で、**https://go.microsoft.com/fwlink/?linkid=2088639** に移動して EDM ダウンロード エージェントにアクセスします。

1. **[実行]** を選択して、ツールをダウンロードし、インストールします。

1. セットアップ ウィザードが背景で開いたら、タスク バーからインストーラーを選択します。

1. **Microsoft 完全データ一致アップロード エージェント セットアップ** ウィザードで、 **[次へ]** を選択します。

1. **[使用許諾契約書の条項に同意する]** を選択し、**[次へ]** を選択します。

1. 既定の **[宛先フォルダー]** パスは変更せずに、**[次へ]** を選択します。

1. **[インストール]** を選択してインストールします。

1. **[ユーザー アカウント制御]** ウィンドウが開いたら、**[はい]** を選択します。

1. インストールが完了したら、**[完了]** を選択します。

1. 左下の Windows シンボルを選択して、スタート メニューを開き、**[Notepad]** と入力して、スタート メニューから **[メモ帳]** を選択します。

1. メモ帳のウィンドウの最初の行に次のテキストを入力します。

    ```
    Name,Birthdate,StreetAddress,EmployeeID
    ```

1. Enter ボタンを使用して、メモ帳のウィンドウの 2 番目の行に次のテキストを追加で入力します。

    ```
    Joni Sherman,01.06.1980,1 Main Street,CSO123456
    ```

1. Enter ボタンを使用して、メモ帳のウィンドウの 3 番目の行に次のテキストを追加で入力します。

    ```
    Lynne Robbins,31.01.1985,2 Secondary Street,CSO654321
    ```

1. **[ファイル]** と **[名前を付けて保存]** を選択してファイルを保存します。

1. 左側のペインから **[ドキュメント]** を選択し、"**ファイル名**" フィールドに「*EmployeeData.csv*」と入力します

1. **[ファイルの種類:]** でドロップダウンを選択し、**[すべてのファイル ( *.* )]** を選択します。

1. **[エンコード]** でドロップダウンを選択し、**[UTF-8]** を選んだら、**[保存]** を選択します。

1. メモ帳ウィンドウを閉じます。

1. マウスの右ボタンでタスクバーの Windows のシンボルを選択し、 **[Windows PowerShell (管理者)]** を選択したら、管理者として実行します。

1. **[ユーザー アカウント制御]** ウィンドウが開いたら、**[はい]** を選択します。

1. EDM アップロード エージェント ディレクトリまで移動します:

    ```
    cd "C:\Program Files\Microsoft\EdmUploadAgent"
    ```

1. 以下のコマンドレットを実行して、自分のアカウントでデータベースをテナントにアップロードすることを承認します：

    ```
    .\EdmUploadAgent.exe /Authorize
    ```

1. **[アカウントを選択する]** ウィンドウが表示されたら、JoniS@WWLxZZZZZZ.onmicrosoft.com としてサインインします (ZZZZZZ はラボ ホスティング プロバイダーから支給された固有のテナント ID)。  Joni のパスワードは、ラボ ホスティング プロバイダーから支給されます。

1. 以下のスクリプトを PowerShell で実行して、EDB ベースの分類による秘密情報の種類のデータベース スキーマの定義をダウンロードします:

    ```
    .\EdmUploadAgent.exe /SaveSchema /DataStoreName employeedb /OutputDir "C:\Users\Admin\Documents\"
    ```

    注: 最後のコマンドが失敗したら、**EDM_DataUploaders** グループ メンバーシップが適用されるまでもっと時間がかかる可能性があります。 スキーマ ファイルをダウンロードすることができるようになるまで最大 1 時間かかる場合があります。  失敗した場合は、次のタスクに進み、後でこの手順に戻ります。

1. PowerShell で以下のスクリプトを実行して、データベース ファイルをハッシュ化し、EDB ベースの分類による秘密情報の種類にアップロードします。

    ```
    .\EdmUploadAgent.exe /UploadData /DataStoreName employeedb /DataFile "C:\Users\Admin\Documents\EmployeeData.csv" /HashLocation "C:\Users\Admin\Documents\" /Schema "C:\Users\Admin\Documents\employeedb.xml"
    ```

1. 状態が完了に変化するまでアップロードの進捗を確認し、次の PowerShell コマンドを実行します:

    ```
    .\EdmUploadAgent.exe /GetSession /DataStoreName employeedb
    ```

1. PowerShell ウィンドウを閉じます。

EDB ベースの分類による秘密情報の種類のためにデータベース ファイルがハッシュ化し、アップロードされました。

### <a name="task-4--create-keyword-dictionary"></a>タスク 4 – キーワード辞書を作成する

個人情報漏えいの違反の中には、同僚が病欠を報告した後に、ユーザーがメールを送信した際に発生しています。  発生時には、理由に病気または疾病が送信されています。それが起こらないようにしたいのです。

1. Client 1 VM (LON-CL1) には **lon-cl1\admin** アカウントでログインし、Microsoft 365 には **Joni Sherman** としてログインしておく必要があります。 

1. **Microsoft Edge** で、Microsoft Purview ポータルのタブがまだ開かれているはずです。 その場合は、それを選択して次の手順に進みます。 閉じた場合は、新しいタブで **https://compliance.microsoft.com** に移動します。

1. 左側のペインから **[データの分類]** を選択し、上部ペインから **[機密情報の種類]** タブを選択します。

1. **[情報の種類を作成]** を選択し、新しい機密情報の種類を作成するウィザードを開きます。

1. **[機密情報の種類の名前を設定]** ページで、次のように入力します。

    - **[名前]** : Contoso 病名の一覧
    - **[説明]** : 従業員の考えられる病名の一覧。
    
1. **[次へ]** を選択します。

1. **[この機密情報の種類のパターンを定義する]** ページで、**[パターンを作成する]** を選択します。

1. **[プライマリ要素]** の下のドロップダウン フィールドを選択し、**[キーワード辞書]** を選択します。

1. **[キーワード辞書の追加]** ページに、名前を「*病名の辞書*」と入力します。 

1. **[キーワード]** 領域に、次のキーワードをそれぞれ別々の行に入力します。

    - *flu*
    - *influenza*
    - *cold*
    - *bronchitis*
    - *otitis*

1. **[完了]** を選択します。

1. **[補助要素]** の下で、**[補助要素または要素のグループを追加]** ドロップダウンを選択し、**[キーワード リスト]** を選択して、キーワード辞書のサポートを追加します。

1. **[キーワード リストの追加]** ページで、**[ID]** フィールドに *[従業員の不在]* と入力します。 **[大文字と小文字を区別しない]** ボックスに、次のキーワードをそれぞれ別々の行に入力します。
    
    - *employee*
    - *absence*
    - *reason*   

1. **[完了]** を選択します。

1. **[新しいパターン]** ページで、構成を確認し、**[作成]** を選択します。

1. **[この機密情報の種類のパターンを定義する]** で、**[次へ]** を選択します。

1. **[コンプライアンス ポリシーに表示する推奨信頼レベルの選択]** で、既定値そのまま使用して **[次へ]** を選択します。 

1. **[設定の確認と終了]** ページで、設定を確認し、**[作成]** を選択します。  処理が完了したら、**[完了]** を選択します。

1. Microsoft Purview ポータルのブラウザー ウィンドウは開いたままにします。

キーワード辞書に基づいて新しい機密情報の種類を作成し、さらにキーワードを追加して、誤検知率を下げることができました。 次のタスクに進みます。

### <a name="task-5--work-with-custom-sensitive-information-types"></a>タスク 5 - カスタム機密情報の種類で作業する

カスタム機密情報の種類はポリシーで利用する前に必ずテストする必要があります。テストをしなかった場合、カスタム検索のパターンが動作せず、データの損失や漏えいが発生する可能性があります。 

1. Client 1 VM (LON-CL1) には **lon-cl1\admin** アカウントでログインし、Microsoft 365 には **Joni Sherman** としてログインしておく必要があります。 

1. 左下の Windows シンボルを選択して、スタート メニューを開き、**[Notepad]** と入力して、スタート メニューから **[メモ帳]** を選択します。

1. メモ帳のウィンドウに次のテキストを入力します。

    ```
    Employee Joni Sherman EMP123456 is on absence because of the flu/influenza.
    ```

1. **[ファイル]**、**[名前を付けて保存]** の順に選択します。

1. 左側のウィンドウで [ドキュメント] を選択します。

1. **[ファイル名]** フィールドに *[SickTestData]* と入力し、**[保存]** を選択します

1. メモ帳ウィンドウを閉じます。

1. **Microsoft Edge** に、Microsoft Purview ポータルのタブがまだ開かれているはずです。 その場合は、それを選択して次の手順に進みます。 閉じた場合は、新しいタブで **https://compliance.microsoft.com** に移動します。

1. 左のナビゲーション ウィンドウで、**[データの分類]** を選択し、**[機密情報の種類]** タブを選択します。

1. 右上の **検索** ボックスに *Contoso* と入力し、Enter キーを押します。

1. **[Contoso 従業員 ID]** を選択して、右側のウィンドウを開きます。

1. 右側のウィンドウで **[テスト]** を選択します。

1. **[テストの対象ファイルのアップロード]** ページで、**[ファイルのアップロード]** を選択します。

1. 左側のウィンドウで **[ドキュメント]** を選択し、*SickTestData* という名前のファイルを選択し、**[開く]** を選択します。

1. **[テスト]** を選択して、分析を開始します。

1. **[一致する検索結果]** のページで、見つかった一致する検索結果を確認します。

1. **[完了]** を選択し、**X** ボタンをクリックしてテスト ページを閉じます。

1. **[データの分類]** ページに戻り、**[Contoso Diseases List]** という名前の秘密情報の種類を選択します。

1. 右側のパネルで **[テスト]** を選択します。

1. **[テストの対象ファイルのアップロード]** ページで、**[ファイルのアップロード]** を選択します。

1. 左側のウィンドウで **[ドキュメント]** を選択し、*SickTestData* という名前のファイルを選択し、**[開く]** を選択します。

1. **[テスト]** を選択して、分析を開始します。

1. **[一致する検索結果]** のページで、見つかった一致する検索結果を確認します。 確認が完了したら、**[完了]** を選択します。

2 つの秘密情報の種類をテストし、検索パターンが目標とするパターンを認識することを検証しました。 機密情報の種類の作成が終了しました。次の演習に進めます。

# <a name="proceed-to-lab-1---exercise-4"></a>ラボ 1 - 演習 4 に進む 
